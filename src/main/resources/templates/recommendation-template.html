<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Empfehlungsformular</title>
    <style type="text/css">
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .section {
            margin-bottom: 25px;
        }
        .section h2 {
            color: #3498db;
            border-bottom: 1px solid #3498db;
            padding-bottom: 5px;
            font-size: 18px;
        }
        .data-row {
            margin: 10px 0;
            display: flex;
        }
        .label {
            font-weight: bold;
            width: 200px;
        }
        .value {
            flex: 1;
        }
        .checkbox-list {
            display: flex;
            flex-wrap: wrap;
        }
        .checkbox-item {
            width: 200px;
            margin: 5px 0;
        }
        .checkbox-checked {
            color: #2ecc71;
        }
        .checkbox-unchecked {
            color: #e74c3c;
        }
        .skills-section {
            margin-top: 15px;
        }
        .skill-category {
            margin-bottom: 15px;
        }
        .skill-category h3 {
            color: #7f8c8d;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .skill-bar {
            height: 20px;
            background-color: #ecf0f1;
            margin-bottom: 10px;
            position: relative;
        }
        .skill-progress {
            height: 100%;
            background-color: #3498db;
            position: absolute;
            top: 0;
            left: 0;
        }
        .skill-name {
            position: absolute;
            left: 10px;
            top: 0;
            line-height: 20px;
            color: #000;
        }
        .skill-percent {
            position: absolute;
            right: 10px;
            top: 0;
            line-height: 20px;
            color: #000;
        }
        .page-break {
            page-break-before: always;
        }
    </style>
</head>
<body>
<div class="header">
    <h1>Empfehlungsformular</h1>
    <p th:text="'Erstellt am ' + ${#temporals.format(#temporals.createNow(), 'dd.MM.yyyy')}"></p>
</div>

<div class="section">
    <h2>Kandidateninformationen</h2>
    <div class="data-row">
        <div class="label">Name:</div>
        <div class="value" th:text="${recommendation.candidateFirstname + ' ' + recommendation.candidateLastname}"></div>
    </div>
    <div class="data-row">
        <div class="label">Position:</div>
        <div class="value" th:text="${recommendation.position}"></div>
    </div>
</div>

<div class="section">
    <h2>Kontakt &amp; Kennenlernen</h2>
    <div class="data-row">
        <div class="label">E-Mail:</div>
        <div class="value" th:text="${recommendation.email}"></div>
    </div>
    <div class="data-row">
        <div class="label">Telefon:</div>
        <div class="value" th:text="${recommendation.phone}"></div>
    </div>
    <div class="data-row">
        <div class="label">Bekannt durch:</div>
        <div class="value" th:text="${recommendation.knownFrom}"></div>
    </div>
    <div class="data-row">
        <div class="label">Kontaktdatum:</div>
        <div class="value" th:text="${contactDateFormatted}"></div>
    </div>
    <div class="data-row">
        <div class="label">Überzeugt am:</div>
        <div class="value" th:text="${convincedDateFormatted}"></div>
    </div>
</div>

<div class="section">
    <h2>Aktuelle oder letzte Position</h2>
    <div class="data-row">
        <div class="label">Beschäftigungsstatus:</div>
        <div class="value" th:text="${recommendation.employmentStatus}"></div>
    </div>
    <div class="data-row">
        <div class="label">Aktuelle Position:</div>
        <div class="value" th:text="${recommendation.currentPosition}"></div>
    </div>
    <div class="data-row">
        <div class="label">Aktuelles Karrierelevel:</div>
        <div class="value" th:text="${recommendation.currentCareerLevel}"></div>
    </div>
    <div class="data-row">
        <div class="label">Letzte Position:</div>
        <div class="value" th:text="${recommendation.lastPosition}"></div>
    </div>
    <div class="data-row">
        <div class="label">Letztes Karrierelevel:</div>
        <div class="value" th:text="${recommendation.lastCareerLevel}"></div>
    </div>
</div>

<div class="section">
    <h2>Informiert über</h2>
    <div class="checkbox-list">
        <div class="checkbox-item">
                <span th:class="${informed.position ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.position ? '✓' : '✗'}"></span>
            <span> Position</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.tasks ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.tasks ? '✓' : '✗'}"></span>
            <span> Aufgaben</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.requirements ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.requirements ? '✓' : '✗'}"></span>
            <span> Anforderungen</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.clientsProjects ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.clientsProjects ? '✓' : '✗'}"></span>
            <span> Kunden/Projekte</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.benefits ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.benefits ? '✓' : '✗'}"></span>
            <span> Benefits</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.training ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.training ? '✓' : '✗'}"></span>
            <span> Weiterbildung</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.coach ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.coach ? '✓' : '✗'}"></span>
            <span> Coach</span>
        </div>
        <div class="checkbox-item">
                <span th:class="${informed.roles ? 'checkbox-checked' : 'checkbox-unchecked'}"
                      th:text="${informed.roles ? '✓' : '✗'}"></span>
            <span> Rollen</span>
        </div>
    </div>
</div>

<div class="section">
    <h2>Eckdaten</h2>
    <div class="data-row">
        <div class="label">Berufserfahrung (Jahre):</div>
        <div class="value" th:text="${recommendation.experienceYears != null ? recommendation.experienceYears : '-'}"></div>
    </div>
    <div class="data-row">
        <div class="label">Kündigungsfrist bis:</div>
        <div class="value" th:text="${noticePeriodFormatted != null ? noticePeriodFormatted : '-'}"></div>
    </div>
    <div class="data-row">
        <div class="label">Möglicher Starttermin:</div>
        <div class="value" th:text="${startDateFormatted != null ? startDateFormatted : '-'}"></div>
    </div>
    <div class="data-row">
        <div class="label">Gehaltsvorstellung:</div>
        <div class="value" th:text="${recommendation.salaryExpectation != null ? recommendation.salaryExpectation + ' €' : '-'}"></div>
    </div>
    <div class="data-row">
        <div class="label">Arbeitszeit:</div>
        <div class="value" th:text="${recommendation.workHours}"></div>
    </div>
    <div class="data-row">
        <div class="label">Reisebereitschaft (%):</div>
        <div class="value" th:text="${recommendation.travelWillingness != null ? recommendation.travelWillingness + '%' : '-'}"></div>
    </div>
</div>

<!-- Seitenumbruch vor den Skills -->
<div class="page-break"></div>

<div class="section">
    <h2>Skills (technologisch)</h2>

    <div class="skill-category" th:if="${recommendation.backendSkills != null && !recommendation.backendSkills.empty}">
        <h3>Backend</h3>
        <div th:each="skill : ${recommendation.backendSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>

    <div class="skill-category" th:if="${recommendation.frontendSkills != null && !recommendation.frontendSkills.empty}">
        <h3>Frontend</h3>
        <div th:each="skill : ${recommendation.frontendSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>

    <div class="skill-category" th:if="${recommendation.databaseSkills != null && !recommendation.databaseSkills.empty}">
        <h3>Datenbanken</h3>
        <div th:each="skill : ${recommendation.databaseSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>

    <div class="skill-category" th:if="${recommendation.buildSkills != null && !recommendation.buildSkills.empty}">
        <h3>Build-Tools</h3>
        <div th:each="skill : ${recommendation.buildSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>

    <div class="skill-category" th:if="${recommendation.cicdSkills != null && !recommendation.cicdSkills.empty}">
        <h3>CI/CD</h3>
        <div th:each="skill : ${recommendation.cicdSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>

    <div class="skill-category" th:if="${recommendation.customSkills != null && !recommendation.customSkills.empty}">
        <h3>Weitere Skills</h3>
        <div th:each="skill : ${recommendation.customSkills}" class="skill-bar">
            <div class="skill-progress" th:style="'width: ' + ${skill.percentage} + '%'"></div>
            <span class="skill-name" th:text="${skill.name}"></span>
            <span class="skill-percent" th:text="${skill.percentage} + '%'"></span>
        </div>
    </div>
</div>

<div class="section">
    <h2>Weitere Angaben</h2>
    <div class="data-row" th:if="${recommendation.cvChoice != null && !recommendation.cvChoice.isEmpty()}">
        <div class="label">CV-Auswahl:</div>
        <div class="value" th:text="${recommendation.cvChoice}"></div>
    </div>
    <div class="data-row" th:if="${recommendation.cvLink != null && !recommendation.cvLink.isEmpty()}">
        <div class="label">CV-Link:</div>
        <div class="value" th:text="${recommendation.cvLink}"></div>
    </div>
    <div class="data-row" th:if="${recommendation.personalityType != null && !recommendation.personalityType.isEmpty()}">
        <div class="label">Persönlichkeitstyp:</div>
        <div class="value" th:text="${recommendation.personalityType}"></div>
    </div>
    <div class="data-row" th:if="${recommendation.hobbies != null && !recommendation.hobbies.isEmpty()}">
        <div class="label">Hobbys:</div>
        <div class="value" th:text="${recommendation.hobbies}"></div>
    </div>
    <div class="data-row" th:if="${recommendation.projectExperience != null && !recommendation.projectExperience.isEmpty()}">
        <div class="label">Projekterfahrung:</div>
        <div class="value" th:text="${recommendation.projectExperience}"></div>
    </div>
    <div class="data-row" th:if="${recommendation.miscellaneous != null && !recommendation.miscellaneous.isEmpty()}">
        <div class="label">Sonstiges:</div>
        <div class="value" th:text="${recommendation.miscellaneous}"></div>
    </div>
</div>
</body>
</html>